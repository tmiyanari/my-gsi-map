<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8" />
    <title>ãƒã‚¤ç·¨é›†GIS - å®Œå…¨ç‰ˆ</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css" rel="stylesheet" />
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.4.3/mapbox-gl-draw.js"></script>
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.4.3/mapbox-gl-draw.css" />
    <style>
        body { margin: 0; padding: 0; font-family: sans-serif; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
        #ui-panel { position: absolute; top: 10px; left: 10px; z-index: 100; display: flex; flex-direction: column; gap: 8px; width: 200px; }
        button { padding: 10px; cursor: pointer; background: white; border: 1px solid #ccc; border-radius: 4px; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        button:hover { background: #f0f0f0; }
        #console-log { background: rgba(255, 255, 255, 0.9); padding: 10px; border: 1px solid #ccc; font-size: 12px; border-radius: 4px; }
        .layer-btns { display: flex; gap: 2px; }
        .layer-btns button { flex: 1; padding: 5px; font-size: 11px; }
    </style>
</head>
<body>

<div id="ui-panel">
    <div class="layer-btns">
        <button id="btn-layer-std">æ¨™æº–</button>
        <button id="btn-layer-pale">æ·¡è‰²</button>
        <button id="btn-layer-ort">å†™çœŸ</button>
    </div>
    <button id="btn-add-point" style="background: #007bff; color: white; border: none;">ğŸ“ åœ°ç‚¹è¿½åŠ : OFF</button>
    <button id="btn-delete" style="background: #dc3545; color: white; border: none;">ğŸ—‘ï¸ é¸æŠã‚’å‰Šé™¤</button>
    <button id="btn-save" style="background: #28a745; color: white; border: none;">â˜ï¸ GitHubã¸ä¿å­˜</button>
    <div id="console-log">åœ°å›³ã‚’ãƒ­ãƒ¼ãƒ‰ä¸­...</div>
</div>

<div id="map"></div>

<script>
    // --- è¨­å®š (ã‚ãªãŸã®ç’°å¢ƒã«åˆã‚ã›ã¦ç¢ºèªã—ã¦ãã ã•ã„) ---
    const GITHUB_TOKEN = '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'; 
    const REPO_PATH = 'tmiyanari/my-gsi-map';
    const FILE_PATH = 'mydata.geojson';

    const map = new maplibregl.Map({
        container: 'map',
        style: {
            version: 8,
            glyphs: "https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",
            sources: {
                'gsi-tiles': {
                    type: '
